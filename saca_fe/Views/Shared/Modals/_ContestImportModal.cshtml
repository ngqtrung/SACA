@{
    Layout = "~/Views/Shared/Modals/_BaseModal.cshtml";
    ViewData["ModalId"] = "contestImportModal";
    ViewData["Title"] =  "Import Contest Modal";
    ViewData["SubmitButtonId"] = "importContestBtn";
    ViewData["ShowSubmitButton"] = true;
    ViewData["Size"] = "sm";
}
@model SACA_Common.DTOs.Contest.Request.ContestImporting

<form id="contestImportForm"
      method="post"
      asp-controller="ContestManagement"
      asp-action="ImportContest"
      enctype="multipart/form-data">
    <div class="mb-4">
        <label asp-for="import_file" class="block text-sm font-medium text-gray-700">Upload File (.zip)</label>
        <input asp-for="import_file" type="file" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm" accept=".zip" />
        <span asp-validation-for="import_file" class="text-red-500 text-sm"></span>
    </div>
</form>

<script>
    $(document).ready(function () {
        document.querySelector("#importContestBtn").addEventListener("click", function(event){
            event.preventDefault();
            
            document.getElementById("contestImportForm").submit();
            // const form = event.target.closest("form");
            // const formData = new FormData(form);

            // fetch("@Url.Action("ImportContest", "ContestManagement")", {
            //     method: "POST",
            //     body: formData
            // })
            // .then(response => response.json())
            // .then(data => {
            //     if (data.status === "success") {
            //         const importedContest = data.contest;
            //         console.log(importedContest);

            //         closeModal("contestImportModal");
            //     } else {
            //         displayValidationErrors("contestImportModal", data.formErrors);
            //     }
            // })
            // .catch(error => console.error("Error submitting form:", error));
        })
    })
</script>